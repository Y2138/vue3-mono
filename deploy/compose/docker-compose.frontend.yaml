version: '3.8'

services:
  # 前端应用
  vue-frontend:
    build:
      context: ../..
      dockerfile: deploy/front/Dockerfile
    image: vue3-mono-frontend:latest
    container_name: vue3-mono-frontend
    restart: unless-stopped
    networks:
      - frontend-network

  # Nginx 服务器 - 直接提供前端服务
  nginx:
    image: nginx:alpine
    container_name: vue3-mono-nginx
    restart: unless-stopped
    ports:
      - "8030:80"
    volumes:
      - ../../docker/nginx-frontend/nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - vue-frontend
    networks:
      - frontend-network

networks:
  frontend-network:
    driver: bridge
