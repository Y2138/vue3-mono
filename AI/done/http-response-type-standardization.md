# HTTP 响应类型标准化

## 问题描述

HTTP 控制器中的响应数据类型使用了 `any` 类型，缺乏类型安全性，且与 proto 定义的类型不一致。

## 改进方案

直接使用 proto 生成的类型作为 HTTP 控制器的响应类型，确保前后端类型一致。

## 实施细节

1. **移除自定义 HTTP 类型定义**
   - 删除了原先创建的 `users/dto/http-types.ts` 文件
   - 不再维护单独的 HTTP 类型定义

2. **使用 proto 生成的类型**
   - 直接导入 `../../shared/users` 中的类型定义
   - 使用 `User`、`AuthResponse`、`GetUsersResponse` 等类型

3. **使用现有的类型转换工具**
   - 利用 `UserTransformer` 进行数据转换
   - 确保返回的数据符合 proto 定义的格式

4. **修改控制器方法返回类型**
   - 将所有方法的返回类型从 `ApiResponse<any>` 修改为对应的具体类型
   - 例如：`Promise<ApiResponse<User> | ApiErrorResponse>`

## 优势

1. **类型一致性**：前后端使用相同的类型定义，减少不必要的转换和潜在的错误
2. **减少维护成本**：不需要维护两套类型定义
3. **类型安全**：编译时可以检查类型错误，提高代码质量
4. **避免类型漂移**：防止两套类型定义随着时间推移而产生差异

## 后续工作

1. 将同样的模式应用到其他模块
2. 考虑为复杂的数据转换创建专用的转换函数
3. 完善 Swagger 文档，确保 API 文档与实际类型一致
